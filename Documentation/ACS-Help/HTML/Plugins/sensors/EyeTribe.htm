<!doctype html>
<HTML>
	<HEAD>
		<meta charset="UTF-8">
		<Title>Eyetribe</Title>
	</HEAD>
	<body class="innerBody">
		<H1>Eyetribe</H1> 
		<span class="componentType">Component Type: Sensor (Subcategory: Computer Vision)</span>
		<p>This component provides access to the raw gaze tracking data from the <a href="https://theeyetribe.com/">EyeTribe</a> eye tracking device. The data includes the estimated gazepoint (x/y), the eye location (x/y), fixation time and eye close time. The plugin connects to a running EyeTribe server.</p>
		<figure>
			<img class="image" src="img/Eyetribe.jpg" alt="Screenshot: Eyetribe plugin" title="Screenshot: Eyetribe plugin" />
			<figcaption>Eyetribe plugin</figcaption>
		</figure>
		<H2>Requirements</H2>
		The Eyetribe tracker must be connected to an USB3.0 port and the Eyetribe server software must be running. 
		<figure>
			<img class="image" src="img/Eyetribe_hw.png" alt="Screenshot: Eyetribe hardware" title="Screenshot: Eyetribe hardware" />
			<figcaption>Eyetribe hardware</figcaption>
		</figure>
		<H2>Output Port Description</H2>
		<ul>
			<li><STRONG>gazex [integer]:</STRONG> The x-coordinate of the estimated gazepoint on the computer screen (in pixels)</li>
			<li><STRONG>gazey [integer]:</STRONG> The y-coordinate of the estimated gazepoint on the computer screen (in pixels)</li>
			<li><STRONG>posx [integer]:</STRONG> The x-coordinate of the eye pupil(s) - left / right / both pupils can be selected via property</li>
			<li><STRONG>posy [integer]:</STRONG> The y-coordinate of the eye pupil(s) - left / right / both pupils can be selected via property</li>
			<li><STRONG>fixationTime [integer]:</STRONG> The time period for fixation of a particular spot on the screen</li>
			<li><STRONG>closeTime [integer]:</STRONG> The time period for closing both eyes (or eye tracking signal lost)</li>
		</ul>
		<H2>Event Listener Description</H2>
		<ul>
			<li><STRONG>startCalibration:</STRONG> if this event is triggered, calibration procedure for the Eyetracker is started.</li>
			<li><STRONG>offsetCorrection:</STRONG> this event is useful when a drift of the cursor position has occured. When the event is triggered, the plugin stops the output of x/y coordinates for several seconds, where the user has time to fix the exact cursor position with the eyes. (see description below).</li>
			<li><STRONG>removeLastOffsetCorrection</STRONG> when this event is triggered, the last offset correction point will be removed - useful if the offset correction did not work as intended.</li>
		</ul>
		<H2>Event Trigger Description</H2>
		<ul>
			<li><STRONG>blink:</STRONG> triggered if the eye detection is lost for a timespan bigger than minBlinkTime and lower than midBlinkTime. This can be used for a single eye-blink detection.</li>
			<li><STRONG>longBlink:</STRONG> triggered if the blob detection is lost for a timespan bigger than midBlinkTime and lower than maxBlinkTime. This can be used for a long eye-blink detection.</li>
			<li><STRONG>fixation:</STRONG> triggered if the user looks at a particular location on the screen for longer than defined in via the fixationTime property.</li>
			<li><STRONG>fixationEnd:</STRONG> triggered if the user looks stops looking at a particular location (which triggered a fixation event).</li>
		</ul>
		<H2>Properties</H2>
		<ul>
			<li><STRONG>minBlinkTime [integer]:</STRONG> the minimum time for a short blink to be detected (a short blink is detected if the blink time is bigger than minBlinkTime and lower than midBlinkTime.)</li>
			<li><STRONG>midBlinkTime [integer]:</STRONG> the time for seperating short blinks from long blinks.</li>
			<li><STRONG>maxBlinkTime [integer]:</STRONG> the maximum time for a short blink to be detected (a long blink is detected if the blink time is bigger than midBlinkTime and lower than maxBlinkTime..</li>
			<li><STRONG>fixationTime [integer]:</STRONG> the minimum time for triggereing a fixation event when the user looks at a particular spot on the screen</li>
			<li><STRONG>pupilPositionMode [combobox]:</STRONG> selects the mode for calculation of the eye position output port values. (left eye / right eye or an average of both eyes)</li>
			<li><STRONG>offsetCorrectionRadius [integer]:</STRONG> defines the distance to an offset correction point where this offset correction points starts to influece the eye coordinates (see description below)</li>
			<li><STRONG>offsetCorrectionMode [combobox]:</STRONG> selects the mode for the offset correction measurement. (manual or automatic mode, see above description)</li>
		</ul>
		<H3>
		Calibration and Offset Correction
		</H3>
		<ul>
			<li>A sucessful gaze estimation needs prior calibration. This should be done using the application/GUI provided by the EyeTribe software. However, a calibration can also be initiated using the provided <strong>startCalibration</strong> EventListener port (see below). When starting the calibration process using this event,
			the mouse cursor is positioned to 9 screen locations, starting at the left upper corner and iterating via middle and right position through 3 rows until the right bottom corner is reached.
			During calibration, follow the cursor with the eyes (reducing head movements to a minimum). For each calibration position, an acoustic signal indicates the time when the samples are taken. When the calibration process is finished,
			the plugin continues sending the measurement data from it's output ports.</li>
			<li>
				The <strong>offset correction</strong> event listener port allows setting so called "offset correction points" at desired screen locations. This is possible during the normal operation of the eye tracking. This is useful when certain locations on the screen cannot be reached because of a calibration problem but a new calibraiton is either not desired or not successful / precise enough.
				The goal of the offset correction is to reduce the error between the real gaze point and the estimated (weak) gaze point where usually the cursor is positioned, by adding a small offset value. 
				After starting the offset correction (which is indicated by an acoustic signal) look at the intended spot on the screen. After 1 second, another acoustic signal indicates that the coordinates have been saved. Now look at the mouse cursor (the weak gaze point which shall be corrected).
				The next step differs according to the selected offset correction mode (which can be chosen via the <strong>offsetCorrectionMode</strong> property:
				<ul>
					<li>manual offset correction: try to follow the cursor with the eyes. It should move slowly towards the original gaze point, correcting the error. This manual calibration phase takes about 4 seconds.</li>
					<li>automatic offset correction: look at the cursor. After 1 second, the offest is measured.</li>
				</ul>
				After the offset correction has been performed, the given offset value is stored into an internal list. As soon as the estimated gaze point enters an area around the offset correction point (the area size is defined via the property offsetCorrectionRadius), an appropriate fraction of the offset value is added to the estimated gaze point coordinates.<br>
				Here, linear approximation is used, so that looking at the original (weak) gaze estimation point will add the full offest value, resulting the corrected gaze estimation point.
			</li>
		</ul>
	</BODY>
</HTML>
