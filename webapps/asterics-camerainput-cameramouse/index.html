<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" type="text/css" href="../startpage/styles/main.css">

      <script type="text/javascript" src="../startpage/lib/jquery-3.2.1.min.js"></script>
    <script src="../startpage/clientExample/javascript/JSmap.js"></script>
    <script src="../startpage/clientExample/javascript/areCommunicator.js"></script>
	<script src="lib/demoLib.js"></script>

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

	<script type="text/javascript">
		/*
		Camera mouse parametrization
		*/
		
		function applySettingsToModel() {
			var cameraSource = document.getElementById("cameraSource");
			var cameraSourceIdx = cameraSource.options[cameraSource.selectedIndex].value;
			setRuntimeComponentProperty(apply1_successCallback, errorCallback, 'XFacetrackerLK.1', 'cameraSelection', cameraSourceIdx);
		}
		
		function apply1_successCallback(data, HTTPstatus) {
			var speed = document.getElementById("speed").value;
			setRuntimeComponentProperty(apply4_successCallback, errorCallback, 'Slider.1', 'default', speed);				
		}

		function apply4_successCallback(data, HTTPstatus) {
			//left click: don't know how to set it by now
		
		
			//Finally start model! - Yippie!!
			startModel(Empty_successCallback, errorCallback);
		}			

		//-------------------------------------
		function applyAndStart() {
			loadModelFileFromWebServerAndUploadModel('webapps/asterics-camerainput-cameramouse/models/XFaceTrackerMouse(WLM).acs', applySettingsToModel);
		}
	</script>

    <title>AsTeRICS Camera Mouse</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>AsTeRICS Camera Mouse</h1>
		<!--
        <a href="https://github.com/asterics/AsTeRICS" class="button"><small>View project on</small> GitHub</a>
        <h1>P4AllBuildingBlocks</h1>
        <h2></h2>
        <a href="https://github.com/asterics/P4AllBuildingBlocks" class="button"><small>View project on</small> GitHub</a>
-->
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
			<h4>Objective</h4>Mouse control (moving mouse cursor, clicking and dragging) by head movements.
			<h4>Description</h4>By moving the head up/down or left/right the mouse cursor should move accordingly. A left click is performed by dwelling (stopping movement and waiting for some time). To do a right, double or drag click select the respective button in the ARE GUI and move the cursor to the location where the click should be performed at. The mouse speed can be changed by using the slider. Click on the On/Off button to toggle mouse control. 
			<p>

			<div>
			<img src="img/facetrackerLK-videoframe.png" alt="Video frame showing face with tracked nose and chin"/>
			<img src="img/facetrackermouse.PNG" alt="GUI with buttons and slider"/>
			</div>
			<p>
					<label for="cameraSource">Choose Camera: </label>
					<select id="cameraSource">
					  <option value="0">First camera</option>
					  <option value="1">Second camera</option>
					  <option value="2">Third camera</option>
					  <option value="3">Fourth camera</option>
					</select>			
					<label for="speed">Mouse Speed: </label>
					<input title="Mouse speed" type="range" id="speed" value="50">
			<br>
			<button onclick="applyAndStart()" title="Description: Applies all settings and starts the model" class="button"> Apply and Start Model </button>
			<p>
			<h4>Requirements</h4>Integrated Webcam or USB camera. OS: Windows, Linux, Mac OSX
			<h4>Major Plugins</h4>
			<ul>
				<li><a target="_blank" href="http://asterics.github.io/AsTeRICS/webapps/WebACS/help/index.html?plugins&sensors/XFacetrackerLK.htm">XFacetrackerLK</a></li>
				<li><a target="_blank" href="http://asterics.github.io/AsTeRICS/webapps/WebACS/help/index.html?plugins&actuators/Mouse.htm">Mouse</a></li>
			</ul>
			<h4>Edit Model</h4>
			<a target="_blank" href="http://asterics.github.io/AsTeRICS/webapps/WebACS/?autoConnect=true&areBaseURI=http://localhost:8081&openFile=AsTeRICS/webapps/asterics-camerainput-cameramouse/models/XFaceTrackerMouse(WLM).acs">Open in WebACS</a>
			<h4>Source Repository</h4>
			<a target="_blank" href="https://github.com/asterics/asterics-camerainput-cameramouse">asterics-camerainput-cameramouse</a>
			<h4>Related Videos</h4>
			<a target="_blank" href="https://youtu.be/P9qJAWegkFM?t=1955">Camera Mouse Demo Screencast</a>
			<p>
			<a target="_blank" href="https://youtu.be/P9qJAWegkFM?t=2228">Camera Mouse Model Creation Screencast</a>
			<h4>Related Tutorials</h4>
			<a target="_blank" href="https://github.com/asterics/AsTeRICS/blob/master/Documentation/AsTeRICS_CameraMouseCreation_StepbyStep_Tutorial.pdf">Camera Mouse Creation StepbyStep Tutorial</a>
			</section>
      </div>
    </div>

  
  </body>
</html>
